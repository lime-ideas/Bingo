<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <title>90s Bingo</title>
    <style>
        body {
            font-family: sans-serif;
            text-align: center;
            padding: 20px;
        }

        table {
            margin: auto;
            border-collapse: collapse;
        }

        td {
            width: 80px;
            height: 80px;
            border: 1px solid #333;
            vertical-align: middle;
            text-align: center;
            cursor: pointer;
            background: #fff;
            user-select: none;
            font-size: 12px;
            padding: 5px;
        }

        td.marked {
            background-color: lightgreen;
            text-decoration: line-through;
        }

        #cardDisplay {
            margin-top: 20px;
        }

        #cardDisplay table {
            margin: 10px auto;
        }

        #submitButton {
            margin-top: 10px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <h1>90s Bingo Generator</h1>
    <button onclick="generateCardAndShow()">ðŸŽ² Get My Bingo Card</button>
    <div id="cardDisplay" style="display: none;">
        <h2>Your Bingo Card</h2>
        <table id="bingo"></table>
        <button id="submitButton" onclick="redirectToForm()">Proceed to Submit Info</button>
    </div>

    <script>
        const phrases = [
            "Ninja Turtles", "Clueless", "Rad", "Tamagotchi", "Spice Girls", "Beepers", "Grunge",
            "Titanic", "Blockbuster", "Furby", "Beanie Babies", "Easy-Bake Oven", "Discman", "Boy Bands",
            "Dawsonâ€™s Creek", "Y2K", "Game Boy", "Pogs", "Fresh Prince", "Frosted Tips", "Napster", "TRL",
            "Butterfly Clips", "No Doubt", "Goosebumps", "Bubble Tape", "Dial-up", "Saved by the Bell",
            "Lisa Frank", "Rugrats", "Flannel", "Troll Dolls", "My So-Called Life", "VHS", "WWF",
            "PokÃ©mon", "Mini Backpacks", "Gak", "MTV", "Clarissa", "Daria", "Skorts", "TLC", "N64",
            "Hypercolor", "Hacky Sack", "Nirvana", "T9 Texting", "Double Dare", "Power Rangers"
        ];

        const googleFormId = '1FAIpQLSdjka319ssYitGdQfoViq7BINnPwXgFsX6JEUzbG5kVuYvHig'; // Replace with your actual Form ID
        const bingoWordsEntryId = 'entry.1510045328'; // Replace with your Bingo Words entry ID

        function shuffle(array) {
            let a = [...array];
            for (let i = a.length - 1; i > 0; i--) {
                let j = Math.floor(Math.random() * (i + 1));
                [a[i], a[j]] = [a[j], a[i]];
            }
            return a;
        }

        function generateCard() {
            return shuffle(phrases).slice(0, 24);
        }

        function renderCard(selected) {
            const table = document.getElementById("bingo");
            table.innerHTML = "";
            let index = 0;

            for (let row = 0; row < 5; row++) {
                const tr = document.createElement("tr");
                for (let col = 0; col < 5; col++) {
                    const td = document.createElement("td");

                    if (row === 2 && col === 2) {
                        td.innerText = "FREE";
                        td.classList.add("marked");
                    } else {
                        td.innerText = selected[index];
                        index++;
                    }
                    tr.appendChild(td);
                }
                table.appendChild(tr);
            }
        }

        function generateCardAndShow() {
            const cardWords = generateCard();
            renderCard(cardWords);
            const encoded = encodeURIComponent(JSON.stringify(cardWords));
            window.location.hash = encoded;
            document.getElementById("cardDisplay").style.display = "block";
            // No need to show cardLinkContainer anymore
        }

        function redirectToForm() {
            const cardWords = JSON.parse(decodeURIComponent(window.location.hash.substring(1)));
            const prefilledUrl = `https://docs.google.com/forms/d/e/${googleFormId}/viewform?usp=pp_url&${bingoWordsEntryId}=${encodeURIComponent(cardWords.join(', '))}`;
            window.location.href = prefilledUrl;
        }

        function loadCardFromHash() {
            const hash = decodeURIComponent(location.hash.slice(1));
            try {
                const selected = JSON.parse(hash);
                if (Array.isArray(selected) && selected.length === 24) {
                    renderCard(selected);
                    document.getElementById("cardDisplay").style.display = "block";
                    // No need to show cardLinkContainer anymore
                }
            } catch {
                // Error parsing hash
            }
        }

        window.onload = loadCardFromHash;
    </script>
</body>

</html>
