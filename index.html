<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>90s Bingo</title>
  <style>
    body { font-family: sans-serif; text-align: center; padding: 20px; }
    table { margin: auto; border-collapse: collapse; }
    td {
      width: 100px; height: 100px; border: 1px solid #333;
      vertical-align: middle; text-align: center;
      cursor: pointer; background: #fff; user-select: none;
    }
    td.marked { background-color: lightgreen; text-decoration: line-through; }
  </style>
</head>
<body>
<h1>90s Bingo Generator</h1>
<button onclick="generateNewCard()">ðŸŽ² Create New Card</button>
<button onclick="copyCardLink()">ðŸ“‹ Copy My Card Link</button>
<p><small>This card is saved in the URL. Bookmark or share this link!</small></p>
<table id="bingo"></table>

<script>
const phrases = [
  "Ninja Turtles", "Clueless", "Rad", "Tamagotchi", "Spice Girls", "Beepers", "Grunge",
  "Titanic", "Blockbuster", "Furby", "Beanie Babies", "The Rachel", "Discman", "Boy Bands",
  "AIM", "Y2K", "Game Boy", "Pogs", "Fresh Prince", "Frosted Tips", "Napster", "TRL",
  "Butterfly Clips", "No Doubt", "Goosebumps", "SNICK", "Dial-up", "Saved by the Bell",
  "Lisa Frank", "Rugrats", "Flannel", "Troll Dolls", "My So-Called Life", "VHS", "WWF",
  "PokÃ©mon", "Mini Backpacks", "Gak", "MTV", "Clarissa", "Daria", "Skorts", "TLC", "N64",
  "Hypercolor", "Hacky Sack", "Nirvana", "T9 Texting", "Double Dare", "Power Rangers"
];

function shuffle(array) {
  let a = [...array];
  for (let i = a.length - 1; i > 0; i--) {
    let j = Math.floor(Math.random() * (i + 1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
}

function generateNewCard() {
  const selected = shuffle(phrases).slice(0, 24);
  const encoded = encodeURIComponent(JSON.stringify(selected));
  window.location.hash = encoded;
  renderCard(selected);
}

function renderCard(selected) {
  const table = document.getElementById("bingo");
  table.innerHTML = "";
  let index = 0;

  for (let row = 0; row < 5; row++) {
    const tr = document.createElement("tr");
    for (let col = 0; col < 5; col++) {
      const td = document.createElement("td");

      if (row === 2 && col === 2) {
        td.innerText = "FREE";
        td.classList.add("marked");
      } else {
        td.innerText = selected[index];
        index++;
      }

      td.addEventListener("click", () => {
        td.classList.toggle("marked");
        saveMarks();
      });

      tr.appendChild(td);
    }
    table.appendChild(tr);
  }

  saveMarks();
}

function saveMarks() {
  const cells = document.querySelectorAll("#bingo td");
  const state = Array.from(cells).map(td => td.classList.contains("marked"));
  localStorage.setItem(location.hash, JSON.stringify(state));
}

function loadMarks() {
  const cells = document.querySelectorAll("#bingo td");
  const state = JSON.parse(localStorage.getItem(location.hash) || "[]");
  state.forEach((mark, i) => {
    if (mark) cells[i].classList.add("marked");
  });
}

function loadFromHash() {
  const hash = decodeURIComponent(location.hash.slice(1));
  try {
    const selected = JSON.parse(hash);
    if (Array.isArray(selected) && selected.length === 24) {
      renderCard(selected);
      loadMarks();
    } else {
      generateNewCard();
    }
  } catch {
    generateNewCard();
  }
}

function copyCardLink() {
  navigator.clipboard.writeText(window.location.href).then(() => {
    alert("Card link copied! Save or share it to return to your card.");
  });
}

window.onload = loadFromHash;
</script>
</body>
</html>
